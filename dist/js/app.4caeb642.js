(function(){var t={4587:function(t,e,a){"use strict";var n=a(9242),s=a(3396);function l(t,e,a,n,l,o){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i)}var o={name:"App"},i=a(89);const r=(0,i.Z)(o,[["render",l]]);var c=r,d=a(2483);const u={class:"auth-area"},m={class:"auth-block"},p=(0,s._)("div",{class:"auth-block-item auth-block__left col-sm-5"},[(0,s._)("img",{src:"/assets/images/logo.png",alt:""})],-1),h={class:"auth-block-item auth-block__right col-sm-7"},g=(0,s._)("h2",{class:"auth-block-item__title"},"Đăng nhập",-1),_={class:"form-group col-sm-12"},f=(0,s._)("label",{for:""},"Tài khoản",-1),v={class:"form-group"},b=(0,s._)("label",{for:""},"Mật khẩu",-1),y=(0,s._)("button",{type:"submit",class:"btn btn-primary btn-login"},"Đăng nhập",-1);function w(t,e,a,l,o,i){return(0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",m,[p,(0,s._)("div",h,[g,(0,s._)("form",{onSubmit:e[2]||(e[2]=(0,n.iM)(((...t)=>i.login&&i.login(...t)),["prevent"])),class:"auth-block-item__content"},[(0,s._)("div",_,[f,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.email=t),class:"form-control",placeholder:"Nhập email hoặc tài khoản"},null,512),[[n.nr,o.email]])]),(0,s._)("div",v,[b,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),placeholder:"Mật khẩu"},null,512),[[n.nr,o.password]])]),y],32)])])])}a(7658);var j=a(4161);const k="http://192.168.2.200:3500",D=j.Z.create({baseURL:k+"/api"});var I=D,z={data(){return{email:"",password:""}},methods:{async login(){try{const t=await I.post("/auth/login",{email:this.email,password:this.password});localStorage.setItem("token",t.data.token),localStorage.setItem("role",t.data.user.role),this.$router.push("/")}catch(t){console.error("Đăng nhập thất bại:",t)}}}};const O=(0,i.Z)(z,[["render",w]]);var x=O;const C=(0,s._)("h2",null,"Đăng ký",-1),T=(0,s._)("button",{type:"submit"},"Đăng ký",-1);function U(t,e,a,l,o,i){return(0,s.wg)(),(0,s.iD)("div",null,[C,(0,s._)("form",{onSubmit:e[2]||(e[2]=(...t)=>i.register&&i.register(...t))},[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),placeholder:"Tên người dùng"},null,512),[[n.nr,o.username]]),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),placeholder:"Mật khẩu"},null,512),[[n.nr,o.password]]),T],32)])}var S={data(){return{username:"",password:""}},methods:{async register(){}}};const L=(0,i.Z)(S,[["render",U]]);var N=L,F=a(7139);const V={class:"layout-area"},E={class:"layout-grid grid-container"},H={class:"grid-item card"},$=(0,s._)("div",{class:"grid-item__top",style:{"text-align":"center",width:"100%",display:"flex","align-items":"center","justify-content":"center","padding-bottom":"20px"}},[(0,s._)("h2",null,"HỆ THỐNG QUẢN LÝ XE TỰ ĐỘNG")],-1),P=(0,s._)("div",{class:"grid-item__bottom"},[(0,s._)("img",{src:"/assets/images/logo.png",alt:""})],-1),M={class:"grid-item__footer"},Z={class:"footer-item col-sm-3"},A=(0,s._)("div",{class:"footer-item col-sm-4"},[(0,s._)("div",{class:"btn btn-success btn-action"},"Cài đặt")],-1),Y=(0,s._)("a",{href:"/report",class:"footer-item col-sm-5"},[(0,s._)("div",{class:"btn btn-primary btn-action"},"Hậu kiểm")],-1),q=["data-lane"],K={class:"grid-item__top"},B={class:"item-title col-sm-12"},G={class:"item-content flex-grap"},R={class:"col-sm-7 content-detail"},Q=["src"],W={class:"col-sm-5 content-detail flex-grap"},X={class:"detail-top col-sm-12",style:{"border-bottom":"2px solid #62adad","text-align":"center",padding:"10px 0px 0px 0px","font-size":"24px","font-weight":"bold"}},J={class:"col-sm-12"},tt={class:"detail-bottom col-sm-12"},et={class:"col-sm-12"},at={class:"col-sm-12"},nt={class:"col-sm-12"},st={class:"grid-item__bottom"},lt={class:"item-title col-sm-12"},ot={class:"item-content flex-grap"},it={class:"col-sm-6 content-detail"},rt={class:"detail-top col-sm-12"},ct=["src"],dt={class:"detail-bottom col-sm-12 text-center"},ut={class:"col-sm-6 content-detail"},mt={class:"detail-top col-sm-12"},pt=["src"],ht={class:"detail-bottom col-sm-12 text-center"},gt={class:"footer-item"},_t={key:0},ft=(0,s._)("br",null,null,-1),vt={key:0,class:"group-button"},bt=["onClick"],yt=["onClick"],wt={key:1,class:"group-button"},jt=(0,s._)("button",{class:"btn btn-secondary btn-status",disabled:""},"Hậu kiểm",-1),kt=(0,s._)("button",{class:"btn btn-success btn-status",disabled:""},"Đã kiểm",-1),Dt=[jt,kt];function It(t,e,a,n,l,o){const i=(0,s.up)("modalQuestion"),r=(0,s.up)("ImageZoom");return(0,s.wg)(),(0,s.iD)("div",V,[(0,s.Wm)(i,{ref:"popup"},null,512),(0,s._)("div",E,[(0,s._)("div",H,[$,P,(0,s._)("div",M,[(0,s._)("div",Z,[(0,s._)("button",{class:"btn-action btn btn-primary",onClick:e[0]||(e[0]=(...t)=>o.logout&&o.logout(...t))},"Đăng xuất")]),A,Y])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.lanes,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"grid-item card lane-item","data-lane":t.id},[(0,s._)("div",K,[(0,s._)("div",B,[(0,s._)("span",null,(0,F.zw)(t.titleTop),1)]),(0,s._)("div",G,[(0,s._)("div",R,[(0,s.Wm)(r,{regular:t.LaneIn.ImageUrlIn,zoom:t.LaneIn.ImageUrlIn,"zoom-amount":2,"click-zoom":!0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t.LaneIn.ImageUrlIn},null,8,Q)])),_:2},1032,["regular","zoom"])]),(0,s._)("div",W,[(0,s._)("div",X,[(0,s._)("div",J,(0,F.zw)(t.LaneIn.LicensePlateIn),1)]),(0,s._)("div",tt,[(0,s._)("div",et,[(0,s.Uk)("CDSID: "),(0,s._)("strong",null,(0,F.zw)(t.LaneIn.CdsidIn),1)]),(0,s._)("div",at,[(0,s.Uk)("Họ và tên: "),(0,s._)("strong",null,(0,F.zw)(t.LaneIn.FullNameIn),1)]),(0,s._)("div",nt,[(0,s.Uk)("Phòng ban: "),(0,s._)("strong",null,(0,F.zw)(t.LaneIn.DepartmentIn),1)])])])])]),(0,s._)("div",st,[(0,s._)("div",lt,[(0,s._)("span",null,(0,F.zw)(t.titleBottom),1)]),(0,s._)("div",ot,[(0,s._)("div",it,[(0,s._)("div",rt,[(0,s.Wm)(r,{regular:t.LaneOut.ImageUrlIn,zoom:t.LaneOut.ImageUrlIn,"zoom-amount":2,"click-zoom":!0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t.LaneOut.ImageUrlIn,alt:""},null,8,ct)])),_:2},1032,["regular","zoom"])]),(0,s._)("div",dt,[(0,s._)("div",null,[(0,s._)("strong",null,(0,F.zw)(t.LaneOut.LicensePlateIn),1)])])]),(0,s._)("div",ut,[(0,s._)("div",mt,[(0,s.Wm)(r,{regular:t.LaneOut.ImageUrlOut,zoom:t.LaneOut.ImageUrlOut,"zoom-amount":2,"click-zoom":!0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t.LaneOut.ImageUrlOut,alt:""},null,8,pt)])),_:2},1032,["regular","zoom"])]),(0,s._)("div",ht,[(0,s._)("div",null,[(0,s._)("strong",null,(0,F.zw)(t.LaneOut.LicensePlateOut),1)])])])])]),(0,s._)("div",{class:"grid-item__footer",style:(0,F.j5)({"background-color":2!==t.LaneOut.IsEdit&&null!=t.LaneOut.Status&&"OK"!==t.LaneOut.Status.toUpperCase()?"red":"aqua"})},[(0,s._)("div",gt,[""!==t.LaneOut.DateTimeIn&&null!=t.LaneOut.DateTimeIn?((0,s.wg)(),(0,s.iD)("p",_t,[(0,s.Uk)(" OUT:"+(0,F.zw)(t.LaneOut.DateTimeOut)+" - IN:"+(0,F.zw)(t.LaneOut.DateTimeIn)+" ",1),ft,(0,s.Uk)(" "+(0,F.zw)(t.LaneOut.FullNameOut)+" - "+(0,F.zw)(t.LaneOut.DepartmentOut),1)])):(0,s.kq)("",!0)]),2!==t.LaneOut.IsEdit&&null!=t.LaneOut.Status&&"OK"!==t.LaneOut.Status.toUpperCase()&&null!==t.LaneOut.pkid&&""!=t.LaneOut.pkid?((0,s.wg)(),(0,s.iD)("div",vt,[(0,s._)("button",{class:"btn btn-secondary btn-status",onClick:e=>o.openPopupSetEdit(t.LaneOut.pkid)},"Hậu kiểm",8,bt),(0,s._)("button",{class:"btn btn-success btn-status",onClick:e=>o.openPopupSetStatus(t.LaneOut.pkid)},"Đã kiểm",8,yt)])):((0,s.wg)(),(0,s.iD)("div",wt,Dt))],4)],8,q)))),128))])])}var zt=a(7851),Ot=a(847);const xt=t=>((0,s.dD)("data-v-ade61ff0"),t=t(),(0,s.Cn)(),t),Ct={key:0,class:"popup-overlay"},Tt={class:"popup-container"},Ut={class:"popup-content"},St=xt((()=>(0,s._)("p",{class:"title"},"Thông báo",-1)));function Lt(t,e,a,n,l,o){return l.isVisible?((0,s.wg)(),(0,s.iD)("div",Ct,[(0,s._)("div",Tt,[(0,s._)("div",Ut,[St,(0,s._)("p",null,(0,F.zw)(l.message),1),(0,s._)("button",{class:"btn btn-success",onClick:e[0]||(e[0]=(...t)=>o.handleOk&&o.handleOk(...t))},"OK"),(0,s._)("button",{class:"btn btn-danger",onClick:e[1]||(e[1]=(...t)=>o.handleCancel&&o.handleCancel(...t))},"Cancel")])])])):(0,s.kq)("",!0)}var Nt={data(){return{isVisible:!1,message:"",resolveFunction:null,rejectFunction:null}},methods:{open(t){return this.isVisible=!0,this.message=t,new Promise(((t,e)=>{this.resolveFunction=t,this.rejectFunction=e}))},handleOk(){this.isVisible=!1,this.resolveFunction&&this.resolveFunction(!0)},handleCancel(){this.isVisible=!1}}};const Ft=(0,i.Z)(Nt,[["render",Lt],["__scopeId","data-v-ade61ff0"]]);var Vt=Ft,Et={components:{ImageZoom:Ot.G,modalQuestion:Vt},data(){return{lanes:[]}},methods:{async openPopupSetStatus(t){try{const e=await this.$refs.popup.open("Bạn có muốn thay đổi trạng thái của từ NG thành OK?");e&&this.setStatus(t)}catch(e){console.error("Error:",e)}},async openPopupSetEdit(t){try{const e=await this.$refs.popup.open("Bạn có muốn chỉnh sửa dữ liệu này ở mục hậu kiểm?");e&&this.setEdit(t)}catch(e){console.error("Error:",e)}},async setStatus(t){var e=await I.post("/data/setstatus",{pkid:t});200==e.status?console.log(e):console.log("ng")},async setEdit(t){var e=await I.post("/data/setedit",{pkid:t});200==e.status?console.log(e):console.log("ng")},async logout(){try{await I.post("/auth/logout"),localStorage.removeItem("token"),this.$router.replace("/login")}catch(t){console.error("Logout error:",t)}},connectSocket(){const t=(0,zt.ZP)(k);t.on("dataUpdate",(t=>{const e=this.lanes.findIndex((e=>e.id===t.LaneID));console.log(t),-1!==e&&(this.lanes[e]={...this.lanes[e],...t})})),t.emit("sendData")},async loadDefaultData(){for(var t=1;t<=5;t++)this.lanes.push({id:t,titleTop:`Làn vào ${t}`,titleBottom:`Làn ra ${t}`,LaneIn:{ImageUrlIn:"/assets/images/default.jpg",LicensePlateIn:"--Biển số xe--",CdsidIn:"--Mã nhân viên--",FullNameIn:"--Tên nhân viên rất dài--",DepartmentIn:"--Phòng ban--"},LaneOut:{pkid:"",ImageUrlIn:"/assets/images/default.jpg",ImageUrlOut:"/assets/images/default.jpg",LicensePlateIn:"--Biển số xe--",LicensePlateOut:"--Biển số xe--",DateTimeIn:"",DateTimeOut:"",CdsidIn:"--Mã nhân viên--",FullNameIn:"--Tên nhân viên--",DepartmentIn:"--Phòng ban--",CdsidOut:"--Mã nhân viên--",FullNameOut:"--Tên nhân viên--",DepartmentOut:"--Phòng ban--",Status:"Ok",IsEdit:0}});const e=await I.post("/data/getdefault");if(200==e.status){const t=e.data.data;t.length>0&&t.forEach((t=>{const e=this.lanes.findIndex((e=>e.id===t.LaneID));-1!==e&&(this.lanes[e]={...this.lanes[e],...t})}))}}},created(){this.connectSocket(),this.loadDefaultData()}};const Ht=(0,i.Z)(Et,[["render",It]]);var $t=Ht;const Pt={class:"layout-area p-20"},Mt=(0,s._)("div",{class:"layout-title"},"CHI TIẾT DỮ LIỆU HỆ THỐNG QUẢN LÝ XE TỰ ĐỘNG",-1),Zt={class:"layout-filter flex-wrap"},At={class:"filter-group flex-wrap col-sm-10"},Yt={class:"form-group col-sm-2"},qt=(0,s._)("label",{for:""},"Thời gian kết thúc",-1),Kt={class:"form-group col-sm-2"},Bt=(0,s._)("label",{for:""},"Thời gian kết thúc",-1),Gt={class:"form-group col-sm-2"},Rt=(0,s._)("label",{for:""},"Bộ phận",-1),Qt=(0,s._)("option",{value:"",selected:""},"Chọn bộ phận",-1),Wt={class:"form-group"},Xt=(0,s._)("label",{for:""},"Họ và tên(Không dấu)",-1),Jt={class:"form-group"},te=(0,s._)("label",{for:""},"CDSID",-1),ee={class:"form-group"},ae=(0,s._)("label",{for:""},"Ford card ID",-1),ne={class:"filter-action col-sm-2"},se={class:"layout-content"},le={class:"table table-bordered"},oe=(0,s._)("thead",{class:"thead-light"},[(0,s._)("tr",null,[(0,s._)("th",{colspan:"1",rowspan:"2"},"No"),(0,s._)("th",{colspan:"1",rowspan:"2"},"Type"),(0,s._)("th",{colspan:"1",rowspan:"2"},"Staff information"),(0,s._)("th",{colspan:"2",rowspan:"1"},"Vehicle In"),(0,s._)("th",{colspan:"2",rowspan:"1"},"Vehicle Out"),(0,s._)("th",{colspan:"1",rowspan:"2"},"Security confirmation"),(0,s._)("th",{colspan:"1",rowspan:"2"},"Note/Action"),(0,s._)("th",{colspan:"1",rowspan:"2"},"Handle")]),(0,s._)("tr",null,[(0,s._)("th",{scope:"col",style:{width:"160px"}},"Date"),(0,s._)("th",{scope:"col",style:{width:"160px"}},"Time"),(0,s._)("th",{scope:"col",style:{width:"160px"}},"Date"),(0,s._)("th",{scope:"col",style:{width:"160px"}},"Time")])],-1),ie={scope:"row",style:{"vertical-align":"middle","text-align":"center"}},re=(0,s._)("td",null,null,-1),ce={style:{"vertical-align":"middle"}},de={colspan:"2"},ue={class:"data-top"},me={class:"data-top__item"},pe={class:"data-top__item"},he={class:"data-bottom"},ge=["src"],_e={key:1},fe={colspan:"2"},ve={class:"data-top"},be={class:"data-top__item"},ye={class:"data-top__item"},we={class:"data-bottom"},je=["src"],ke={key:1},De={class:"td-handle"},Ie={class:"row-handle-group"},ze=["onClick"],Oe=(0,s._)("i",{class:"fi fi-rr-edit",style:{color:"blue"}},null,-1),xe=[Oe],Ce=(0,s._)("div",{class:"btn-handle","data-action":"c-pop"},[(0,s._)("i",{class:"fi fi-rr-trash",style:{color:"red"}})],-1),Te={class:"table table-bordered",ref:"myTable",style:{display:"none"}},Ue={class:"thead-light"},Se={scope:"col",colspan:"20",rowspan:"1",style:{}},Le=(0,s._)("tr",null,[(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"No"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Type"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Ford Card ID"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Full name"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"CDSID"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Department"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Vehicle Datetime In"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Vehicle Datetime Out"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Vehicle Image In"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Vehicle Image Out"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Security confirmation"),(0,s._)("th",{colspan:"1",rowspan:"1",style:{"vertical-align":"middle","font-weight":"bold"}},"Note/Action")],-1),Ne={style:{"vertical-align":"middle","text-align":"center"}},Fe=(0,s._)("td",null,null,-1);function Ve(t,e,a,l,o,i){const r=(0,s.up)("ReportEdit"),c=(0,s.up)("ImageZoom");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r,{ref:"popup"},null,512),(0,s._)("div",Pt,[Mt,(0,s._)("div",Zt,[(0,s._)("div",At,[(0,s._)("div",Yt,[qt,(0,s.wy)((0,s._)("input",{class:"form-control",type:"datetime-local",name:"datimeStart",id:"datimeStart","onUpdate:modelValue":e[0]||(e[0]=t=>l.startDateTime=t)},null,512),[[n.nr,l.startDateTime]])]),(0,s._)("div",Kt,[Bt,(0,s.wy)((0,s._)("input",{type:"datetime-local",class:"form-control",name:"datimeEnd",id:"datimeEnd","onUpdate:modelValue":e[1]||(e[1]=t=>l.endDateTime=t)},null,512),[[n.nr,l.endDateTime]])]),(0,s._)("div",Gt,[Rt,(0,s.wy)((0,s._)("select",{class:"form-control",name:"department","onUpdate:modelValue":e[2]||(e[2]=t=>o.department=t),id:""},[Qt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.departmentOptions,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value},(0,F.zw)(t.label),1)))),128))],512),[[n.bM,o.department]])]),(0,s._)("div",Wt,[Xt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",name:"fordCardID",id:"","aria-describedby":"helpId",placeholder:"Nhập tên nhân viên","onUpdate:modelValue":e[3]||(e[3]=t=>o.fullName=t)},null,512),[[n.nr,o.fullName]])]),(0,s._)("div",Jt,[te,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",name:"fordCardID",id:"","aria-describedby":"helpId",placeholder:"Nhập CDSID","onUpdate:modelValue":e[4]||(e[4]=t=>o.cdsid=t)},null,512),[[n.nr,o.cdsid]])]),(0,s._)("div",ee,[ae,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",name:"fordCardID",id:"","aria-describedby":"helpId",placeholder:"Nhập Ford card ID","onUpdate:modelValue":e[5]||(e[5]=t=>o.fordCardID=t)},null,512),[[n.nr,o.fordCardID]])])]),(0,s._)("div",ne,[(0,s._)("div",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>i.exportToExcel&&i.exportToExcel(...t)),style:{"margin-right":"10px"}}," Xuất excel "),(0,s._)("div",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...t)=>i.searchData&&i.searchData(...t)),style:{"margin-right":"10px"}}," Tìm kiếm ")])]),(0,s._)("div",se,[(0,s._)("table",le,[oe,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.data,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t._doc._id},[(0,s._)("th",ie,(0,F.zw)(e),1),re,(0,s._)("td",ce,[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)(" Ford Card ID:"),(0,s._)("strong",null,(0,F.zw)(t._doc.FordCardIDIn),1)]),(0,s._)("li",null,[(0,s.Uk)(" CDSID: "),(0,s._)("strong",null,(0,F.zw)(t._doc.CdsidIn),1)]),(0,s._)("li",null,[(0,s.Uk)(" Full name: "),(0,s._)("strong",null,(0,F.zw)(t._doc.FullNameIn),1)]),(0,s._)("li",null,[(0,s.Uk)(" Department: "),(0,s._)("strong",null,(0,F.zw)(t._doc.DepartmentIn),1)])])]),(0,s._)("td",de,[(0,s._)("div",ue,[(0,s._)("div",me,(0,F.zw)(i.getDatetime(t._doc.DateTimeIn,"date")),1),(0,s._)("div",pe,(0,F.zw)(i.getDatetime(t._doc.DateTimeIn,"time")),1)]),(0,s._)("div",he,[null!=t._doc.ImageUrlIn?((0,s.wg)(),(0,s.j4)(c,{key:0,regular:t._doc.ImageUrlIn,zoom:t._doc.ImageUrlIn,"zoom-amount":2,"click-zoom":!0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t._doc.ImageUrlIn,alt:""},null,8,ge)])),_:2},1032,["regular","zoom"])):((0,s.wg)(),(0,s.iD)("div",_e,"Không có"))])]),(0,s._)("td",fe,[(0,s._)("div",ve,[(0,s._)("div",be,(0,F.zw)(i.getDatetime(t._doc.DateTimeOut,"date")),1),(0,s._)("div",ye,(0,F.zw)(i.getDatetime(t._doc.DateTimeOut,"time")),1)]),(0,s._)("div",we,[null!=t._doc.ImageUrlOut?((0,s.wg)(),(0,s.j4)(c,{key:0,regular:t._doc.ImageUrlOut,zoom:t._doc.ImageUrlOut,"zoom-amount":2,"click-zoom":!0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t._doc.ImageUrlOut,alt:""},null,8,je)])),_:2},1032,["regular","zoom"])):((0,s.wg)(),(0,s.iD)("div",ke,"Không có"))])]),(0,s._)("td",null,(0,F.zw)(t._doc.RootCause),1),(0,s._)("td",null,(0,F.zw)(t._doc.ActionNote),1),(0,s._)("td",De,[(0,s._)("div",Ie,[(0,s._)("div",{class:"btn-handle","data-action":"o-pop",onClick:e=>i.openEdit(t._doc._id,t._doc.RootCause,t._doc.ActionNote)},xe,8,ze),Ce])])])))),128))])]),(0,s._)("table",Te,[(0,s._)("thead",Ue,[(0,s._)("tr",null,[(0,s._)("th",Se,"Chi tiết dữ liệu xe từ "+(0,F.zw)(i.getDatetime(l.startDateTime,"datetime"))+" đến "+(0,F.zw)(i.getDatetime(l.endDateTime,"datetime")),1)]),Le]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.data,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t._doc._id},[(0,s._)("td",Ne,(0,F.zw)(e),1),Fe,(0,s._)("td",null,(0,F.zw)(t._doc.FordCardIDIn),1),(0,s._)("td",null,(0,F.zw)(t._doc.FullNameIn),1),(0,s._)("td",null,(0,F.zw)(t._doc.CdsidIn),1),(0,s._)("td",null,(0,F.zw)(t._doc.DepartmentIn),1),(0,s._)("td",null,(0,F.zw)(i.getDatetime(t._doc.DateTimeIn,"datetime")),1),(0,s._)("td",null,(0,F.zw)(i.getDatetime(t._doc.DateTimeOut,"datetime")),1),(0,s._)("td",null,(0,F.zw)(t._doc.ImageUrlIn),1),(0,s._)("td",null,(0,F.zw)(t._doc.ImageUrlOut),1),(0,s._)("td",null,(0,F.zw)(t._doc.RootCause),1),(0,s._)("td",null,(0,F.zw)(t._doc.ActionNote),1)])))),128))])],512)])])],64)}var Ee=a(4870),He=a(7187),$e=a.n(He);const Pe=t=>((0,s.dD)("data-v-0d963a0d"),t=t(),(0,s.Cn)(),t),Me={key:0,class:"popup-overlay report-edit"},Ze={class:"popup-container"},Ae={class:"popup-content"},Ye=Pe((()=>(0,s._)("p",{class:"title"},"Thay đổi dữ liệu",-1))),qe={class:"form-group"},Ke=Pe((()=>(0,s._)("label",{for:""},"Security confirmation",-1))),Be={class:"form-group"},Ge=Pe((()=>(0,s._)("label",{for:""},"Action/Note",-1)));function Re(t,e,a,l,o,i){return o.isVisible?((0,s.wg)(),(0,s.iD)("div",Me,[(0,s._)("div",Ze,[(0,s._)("div",Ae,[Ye,(0,s._)("div",qe,[Ke,(0,s.wy)((0,s._)("textarea",{class:"form-control",name:"confirm",id:"",rows:"3","onUpdate:modelValue":e[0]||(e[0]=t=>o.confirm=t)},null,512),[[n.nr,o.confirm]])]),(0,s._)("div",Be,[Ge,(0,s.wy)((0,s._)("textarea",{class:"form-control",name:"note",id:"",rows:"3","onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t)},null,512),[[n.nr,o.note]])]),(0,s._)("button",{class:"btn btn-success",onClick:e[2]||(e[2]=(...t)=>i.saveDocument&&i.saveDocument(...t))},"Save"),(0,s._)("button",{class:"btn btn-danger",onClick:e[3]||(e[3]=(...t)=>i.handleCancel&&i.handleCancel(...t))},"Cancel")])])])):(0,s.kq)("",!0)}var Qe={data(){return{isVisible:!1,note:"",confirm:"",pkid:"",resolveFunction:null,rejectFunction:null}},methods:{open(t,e,a){return this.isVisible=!0,this.confirm=e,this.note=a,this.pkid=t,new Promise(((t,e)=>{this.resolveFunction=t,this.rejectFunction=e}))},async saveDocument(){var t=await I.post("/data/setnote",{pkid:this.pkid,confirm:this.confirm,note:this.note});200==t.status?(this.isVisible=!1,this.resolveFunction(!0)):console.log("ng")},handleCancel(){this.isVisible=!1}}};const We=(0,i.Z)(Qe,[["render",Re],["__scopeId","data-v-0d963a0d"]]);var Xe=We,Je=a(7092),ta={components:{ImageZoom:Ot.G,ReportEdit:Xe},data(){return{data:[],fordCardID:null,fullName:null,cdsid:null,department:null,departmentOptions:[]}},setup(){const t=(0,Ee.iH)(a()),e=(0,Ee.iH)(n());function a(){const t=$e()().tz("Asia/Ho_Chi_Minh").startOf("day").add(6,"hours");return t.format("YYYY-MM-DDTHH:mm")}function n(){const t=$e()().tz("Asia/Ho_Chi_Minh").startOf("day").add(19,"hours");return t.format("YYYY-MM-DDTHH:mm")}return{startDateTime:t,endDateTime:e}},created(){this.searchData(),this.getDataDefault()},methods:{exportToExcel(){const t=this.$refs.myTable,e=Je.ZP.utils.table_to_sheet(t),a=Je.ZP.utils.book_new();Je.ZP.utils.book_append_sheet(a,e,"Sheet1"),Je.ZP.writeFile(a,`${this.getDatetime(new Date,"file")}.xlsx`)},async openEdit(t,e,a){try{const n=await this.$refs.popup.open(t,e,a);n&&this.searchData()}catch(n){console.error("Error:",n)}},async getDataDefault(){const t=await I.post("/data/getdepartmentdata");this.departmentOptions=t.data.data.map((t=>({value:t,label:t})))},async searchData(){const t=await I.post("/data/getreportdata",{fordCardID:this.fordCardID,fullName:this.fullName,cdsid:this.cdsid,department:this.department,startDateTime:this.startDateTime,endDateTime:this.endDateTime});200==t.status&&(this.data=t.data.data)},getDatetime(t,e){const a=new Date(t);if(null==t)return"Không có";const n=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0"),o=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0"),r=String(a.getSeconds()).padStart(2,"0");return"date"==e?`${n}-${s}-${l}`:"time"==e?`${o}:${i}:${r}`:"file"==e?`${o}_${i}_${r}_${n}_${s}_${l}`:`'${o}:${i}:${r} ${n}/${s}/${l}`}}};const ea=(0,i.Z)(ta,[["render",Ve]]);var aa=ea;const na={class:"layout-area p-20"},sa=(0,s.uE)('<div class="layout-title">Dữ liệu người dùng</div><div class="layout-filter flex-wrap"><div class="filter-group flex-wrap col-sm-10"><div class="form-group col-sm-1"><label for="">Quyền hạn</label><select class="form-control" name="" id=""><option>Admin</option><option>User</option></select></div></div><div class="filter-action col-sm-2"><div class="btn btn-primary">Tìm kiếm</div></div></div><div class="layout-content"><table class="table table-bordered"><thead class="thead-light"><tr><th scope="col">No</th><th scope="col">Họ và tên</th><th scope="col">Email</th><th scope="col">Tài khoản</th><th scope="col">Mật khẩu</th><th scope="col">Loại tài khoản</th><th scope="col">Handle</th></tr></thead><tbody><tr><th scope="row">1</th><td>Ngô Viết Đàn</td><td>ngodan2409@gmail.com</td><td>ngodan2409</td><td class="hidetext">12345678</td><td>Admin</td><td class="td-handle"><div class="row-handle-group"><div class="btn-handle" data-action="o-pop"><i class="fi fi-rr-edit" style="color:blue;"></i></div><div class="btn-handle" data-action="c-pop"><i class="fi fi-rr-trash" style="color:red;"></i></div></div></td></tr></tbody></table></div><div class="layout-popup"><div class="popup-status"></div><div class="popup-content"><div class="popup-content__layout"><div class="popup-content__layout--title align-center justify-between"><h5>Chỉnh sửa và hiển thị</h5><div class="btn-handle" data-action="c-pop" style="margin-right:0px;"><i class="fi fi-rr-cross" style="color:black;"></i></div></div><div class="popup-content__layout--content"><div class="layout--content__data flex-grap justify-between" style="margin-top:20px;"><div class="form-group col-sm-6"><label for="">Họ và tên</label><input readonly type="text" name="" id="" class="form-control" value="Ngô Viết Đàn" aria-describedby="helpId"></div><div class="form-group col-sm-6"><label for="">Email</label><input readonly type="text" name="" id="" class="form-control" value="ngodan2409@gmail.com" aria-describedby="helpId"></div><div class="form-group col-sm-6"><label for="">Tài khoản</label><input readonly type="text" name="" id="" class="form-control" value="ngodan2409" aria-describedby="helpId"></div><div class="form-group col-sm-6"><label for="">Mật khẩu</label><input readonly type="text" name="" id="" class="form-control" value="12345678" aria-describedby="helpId"></div><div class="form-group col-sm-6"><label for="">Kiểu tài khoản</label><input readonly type="text" name="" id="" class="form-control" value="Admin" aria-describedby="helpId"></div></div><div class="layout--content__action"><div class="btn btn-primary">Lưu dữ liệu</div></div></div></div></div></div>',4),la=[sa];function oa(t,e){return(0,s.wg)(),(0,s.iD)("div",na,la)}const ia={},ra=(0,i.Z)(ia,[["render",oa]]);var ca=ra;const da=(0,s._)("h1",null,"Data from Server",-1);function ua(t,e,a,n,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[da,(0,s._)("button",{class:"btn-action btn btn-primary",onClick:e[0]||(e[0]=(...t)=>o.createData&&o.createData(...t))},"Tạo data")])}var ma={data(){return{data:[]}},methods:{async createData(){const t=await I.post("/data/create");console.log(t)}}};const pa=(0,i.Z)(ma,[["render",ua]]);var ha=pa;const ga=(0,s._)("h1",null,"Data from Server",-1);function _a(t,e,a,n,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[ga,(0,s._)("button",{class:"btn-action btn btn-primary",onClick:e[0]||(e[0]=(...t)=>o.createData&&o.createData(...t))},"Get Data")])}var fa={data(){return{data:[]}},methods:{async createData(){const t=await I.post("/data/csvdata");console.log(t)}}};const va=(0,i.Z)(fa,[["render",_a]]);var ba=va;function ya(){const t=localStorage.getItem("token");return!!t}function wa(){return localStorage.getItem("role")}const ja=[{path:"/",component:$t,meta:{requiresAuth:!0}},{path:"/test",component:ha},{path:"/test2",component:ba},{path:"/report",component:aa,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/user",component:ca,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/login",component:x},{path:"/register",component:N}],ka=(0,d.p7)({history:(0,d.PO)(),routes:ja});ka.beforeEach(((t,e,a)=>{if(t.matched.some((t=>t.meta.requiresAuth))){const e=ya();if(e)if(t.matched.some((t=>t.meta.requiresAdmin))){const t=wa();"admin"===t?a():a("/")}else a();else a("/login")}else a()}));var Da=ka,Ia=a(4239),za=a.n(Ia);const Oa=(0,n.ri)(c);Oa.use(Da),Oa.use(za()),Oa.mount("#app")},4239:function(){},5126:function(t,e,a){var n={"./af":2685,"./af.js":2685,"./ar":6839,"./ar-dz":1278,"./ar-dz.js":1278,"./ar-kw":7410,"./ar-kw.js":7410,"./ar-ly":4896,"./ar-ly.js":4896,"./ar-ma":1949,"./ar-ma.js":1949,"./ar-sa":6813,"./ar-sa.js":6813,"./ar-tn":3979,"./ar-tn.js":3979,"./ar.js":6839,"./az":9453,"./az.js":9453,"./be":918,"./be.js":918,"./bg":3639,"./bg.js":3639,"./bm":3472,"./bm.js":3472,"./bn":3021,"./bn-bd":1360,"./bn-bd.js":1360,"./bn.js":3021,"./bo":73,"./bo.js":73,"./br":8497,"./br.js":8497,"./bs":1194,"./bs.js":1194,"./ca":9871,"./ca.js":9871,"./cs":8383,"./cs.js":8383,"./cv":7929,"./cv.js":7929,"./cy":7462,"./cy.js":7462,"./da":9539,"./da.js":9539,"./de":1784,"./de-at":7263,"./de-at.js":7263,"./de-ch":8754,"./de-ch.js":8754,"./de.js":1784,"./dv":4151,"./dv.js":4151,"./el":752,"./el.js":752,"./en-au":651,"./en-au.js":651,"./en-ca":1639,"./en-ca.js":1639,"./en-gb":9924,"./en-gb.js":9924,"./en-ie":1596,"./en-ie.js":1596,"./en-il":2258,"./en-il.js":2258,"./en-in":8405,"./en-in.js":8405,"./en-nz":2172,"./en-nz.js":2172,"./en-sg":2574,"./en-sg.js":2574,"./eo":4329,"./eo.js":4329,"./es":9866,"./es-do":2056,"./es-do.js":2056,"./es-mx":2270,"./es-mx.js":2270,"./es-us":7711,"./es-us.js":7711,"./es.js":9866,"./et":5660,"./et.js":5660,"./eu":4192,"./eu.js":4192,"./fa":8891,"./fa.js":8891,"./fi":9688,"./fi.js":9688,"./fil":4684,"./fil.js":4684,"./fo":2023,"./fo.js":2023,"./fr":4335,"./fr-ca":3898,"./fr-ca.js":3898,"./fr-ch":3176,"./fr-ch.js":3176,"./fr.js":4335,"./fy":3464,"./fy.js":3464,"./ga":944,"./ga.js":944,"./gd":4058,"./gd.js":4058,"./gl":7724,"./gl.js":7724,"./gom-deva":7380,"./gom-deva.js":7380,"./gom-latn":7889,"./gom-latn.js":7889,"./gu":3133,"./gu.js":3133,"./he":3408,"./he.js":3408,"./hi":6539,"./hi.js":6539,"./hr":9229,"./hr.js":9229,"./hu":347,"./hu.js":347,"./hy-am":9373,"./hy-am.js":9373,"./id":8695,"./id.js":8695,"./is":9144,"./is.js":9144,"./it":6556,"./it-ch":4556,"./it-ch.js":4556,"./it.js":6556,"./ja":1874,"./ja.js":1874,"./jv":6256,"./jv.js":6256,"./ka":6125,"./ka.js":6125,"./kk":2507,"./kk.js":2507,"./km":6719,"./km.js":6719,"./kn":819,"./kn.js":819,"./ko":564,"./ko.js":564,"./ku":24,"./ku.js":24,"./ky":6204,"./ky.js":6204,"./lb":9754,"./lb.js":9754,"./lo":6965,"./lo.js":6965,"./lt":1532,"./lt.js":1532,"./lv":7100,"./lv.js":7100,"./me":5130,"./me.js":5130,"./mi":800,"./mi.js":800,"./mk":7926,"./mk.js":7926,"./ml":3673,"./ml.js":3673,"./mn":8678,"./mn.js":8678,"./mr":531,"./mr.js":531,"./ms":7774,"./ms-my":5500,"./ms-my.js":5500,"./ms.js":7774,"./mt":7873,"./mt.js":7873,"./my":2726,"./my.js":2726,"./nb":6468,"./nb.js":6468,"./ne":6480,"./ne.js":6480,"./nl":7855,"./nl-be":2578,"./nl-be.js":2578,"./nl.js":7855,"./nn":1534,"./nn.js":1534,"./oc-lnc":8449,"./oc-lnc.js":8449,"./pa-in":7828,"./pa-in.js":7828,"./pl":5790,"./pl.js":5790,"./pt":3870,"./pt-br":9632,"./pt-br.js":9632,"./pt.js":3870,"./ro":325,"./ro.js":325,"./ru":1751,"./ru.js":1751,"./sd":9571,"./sd.js":9571,"./se":9613,"./se.js":9613,"./si":2862,"./si.js":2862,"./sk":1375,"./sk.js":1375,"./sl":7987,"./sl.js":7987,"./sq":9067,"./sq.js":9067,"./sr":2459,"./sr-cyrl":9099,"./sr-cyrl.js":9099,"./sr.js":2459,"./ss":1083,"./ss.js":1083,"./sv":9566,"./sv.js":9566,"./sw":6296,"./sw.js":6296,"./ta":291,"./ta.js":291,"./te":8108,"./te.js":8108,"./tet":7999,"./tet.js":7999,"./tg":6532,"./tg.js":6532,"./th":5734,"./th.js":5734,"./tk":4609,"./tk.js":4609,"./tl-ph":7886,"./tl-ph.js":7886,"./tlh":8080,"./tlh.js":8080,"./tr":3933,"./tr.js":3933,"./tzl":2789,"./tzl.js":2789,"./tzm":5011,"./tzm-latn":6499,"./tzm-latn.js":6499,"./tzm.js":5011,"./ug-cn":9982,"./ug-cn.js":9982,"./uk":3066,"./uk.js":3066,"./ur":7394,"./ur.js":7394,"./uz":1779,"./uz-latn":6854,"./uz-latn.js":6854,"./uz.js":1779,"./vi":7576,"./vi.js":7576,"./x-pseudo":3187,"./x-pseudo.js":3187,"./yo":4424,"./yo.js":4424,"./zh-cn":5415,"./zh-cn.js":5415,"./zh-hk":2792,"./zh-hk.js":2792,"./zh-mo":4883,"./zh-mo.js":4883,"./zh-tw":6445,"./zh-tw.js":6445};function s(t){var e=l(t);return a(e)}function l(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=l,t.exports=s,s.id=5126}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var l=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,l){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],l=t[d][2];for(var i=!0,r=0;r<n.length;r++)(!1&l||o>=l)&&Object.keys(a.O).every((function(t){return a.O[t](n[r])}))?n.splice(r--,1):(i=!1,l<o&&(o=l));if(i){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[n,s,l]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,l,o=n[0],i=n[1],r=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(r)var d=r(a)}for(e&&e(n);c<o.length;c++)l=o[c],a.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return a.O(d)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4587)}));n=a.O(n)})();
//# sourceMappingURL=app.4caeb642.js.map